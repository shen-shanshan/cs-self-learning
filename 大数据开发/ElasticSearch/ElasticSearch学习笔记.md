# 入门

> ES 的业务场景主要为超大数据量的查询，当在日常业务中对千万级别的数据量进行分页查询时，使用 Mysql 进行处理很可能出现会超时，此时就可以考虑使用 ES 来进行搜索。

ES 使用倒排索引：

- 正排索引：通过 id（主键，索引）查找内容，再从内容中查找关键字。
- 倒排索引：通过 keyword（关键字，索引）关联 id。

> PUT 方法具有幂等性，发送同样的内容，返回的结果一样。简单理解，你创建 index 不能创建两个一样的，所以需要符合幂等性（使用 PUT），但是添加数据可以有多条一样的数据，这违反了幂等性所以添加数据不需要使用 PUT，而可以使用 POST。

ES 分词器：

- 当保存文档数据时，ES 会将文字进行分词，并将拆解后的数据保存到倒排索引中。
- 当进行查询时，ES 也会将查询内容进行分词，并在倒排索引中去进行匹配（全文检索匹配：`match`，类似于模糊查询）。

完全匹配（精确查询）：`match_phrase`。

关键字高亮：`highlight`。

聚合操作（分组、求平均）：`aggs`。

创建索引时，可以设置各个字段的属性：

![Snipaste_2023-08-30_01-04-49](ElasticSearch学习笔记.assets/Snipaste_2023-08-30_01-04-49.png)

> 说明：
>
> - `text`：可以被分词。
> - `keyword`：不能被分词，需要完整匹配。
> - `index`：是否能被索引。

# Java API