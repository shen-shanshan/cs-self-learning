# 调试记录

```bash
Processed prompts:   0%|                                                                                                                                                  | 0/1 [00:00<?, ?it/s, est. speed input: 0.00 toks/s, output: 0.00 toks/s]
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 348. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 4086. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 44. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 374. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 7797. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 847. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 16665. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 382. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 785. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 25975. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 304. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 279. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 2661. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 5114. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 374. Please file an issue.
ERROR 04-17 01:33:35 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 6785. Please file an issue.
Processed prompts: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:03<00:00,  3.48s/it, est. speed input: 3.16 toks/s, output: 4.60 toks/s]
--------------------------------------------------
Guided decoding by Choice:  vLLM is beyond my expectations.

The sentiment in the given statement is positive
--------------------------------------------------
Processed prompts:   0%|                                                                                                                                                  | 0/1 [00:00<?, ?it/s, est. speed input: 0.00 toks/s, output: 0.00 toks/s]
ERROR 04-17 01:33:36 [backend_xgrammar.py:148] Failed to advance FSM for request 1 for tokens 734. Please file an issue.
ERROR 04-17 01:33:36 [backend_xgrammar.py:148] Failed to advance FSM for request 1 for tokens 151643. Please file an issue.
Processed prompts: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00,  2.29it/s, est. speed input: 73.48 toks/s, output: 18.37 toks/s]
--------------------------------------------------
Guided decoding by Regex: alan.turing@enigma.com
--------------------------------------------------
Processed prompts:   0%|                                                                                                                                                  | 0/1 [00:00<?, ?it/s, est. speed input: 0.00 toks/s, output: 0.00 toks/s]ERROR 04-17 01:33:36 [backend_xgrammar.py:148] Failed to advance FSM for request 2 for tokens 624. Please file an issue.
Processed prompts: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00,  1.04it/s, est. speed input: 22.90 toks/s, output: 16.65 toks/s]
--------------------------------------------------
Guided decoding by JSON: .
{
  "brand": "Ford",
  "model": "Mustang
--------------------------------------------------
Processed prompts:   0%|                                                                                                                                                  | 0/1 [00:00<?, ?it/s, est. speed input: 0.00 toks/s, output: 0.00 toks/s]
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 22406. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 11. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 2924. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 264. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 2971. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 311. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 1172. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 1473. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 3847. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 6693. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 364. Please file an issue.
ERROR 04-17 01:33:37 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 2332. Please file an issue.
ERROR 04-17 01:33:38 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 6. Please file an issue.
ERROR 04-17 01:33:38 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 374. Please file an issue.
ERROR 04-17 01:33:38 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 23933. Please file an issue.
ERROR 04-17 01:33:38 [backend_xgrammar.py:148] Failed to advance FSM for request 3 for tokens 323. Please file an issue.
Processed prompts: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00,  1.13it/s, est. speed input: 23.72 toks/s, output: 18.08 toks/s]
--------------------------------------------------
Guided decoding by Grammar:  Additionally, include a condition to only show users whose 'email' is verified and
--------------------------------------------------
nanobind: leaked 1 instances!
 - leaked instance 0xfffc7c140e28 of type "xgrammar.xgrammar_bindings.GrammarCompiler"
nanobind: leaked 1 types!
 - leaked type "xgrammar.xgrammar_bindings.GrammarCompiler"
nanobind: leaked 9 functions!
 - leaked function "compile_structural_tag"
 - leaked function "__init__"
 - leaked function ""
 - leaked function "compile_builtin_json_grammar"
 - leaked function "compile_regex"
 - leaked function "compile_grammar"
 - leaked function "compile_json_schema"
 - leaked function "clear_cache"
 - leaked function "get_cache_size_bytes"
nanobind: this is likely caused by a reference counting issue in the binding code.
```

choice:

```bash
[07:42:31] /project/cpp/grammar_matcher.cc:380: Accepting token id 6785, string: " positive", state state:
Num of stacks: 2
Stack #0: {
id: 0, StackElement: rule 0: root, sequence 1: ("Positive"), element id: 0, element in string: 0, parent id: -1, ref count: 1
}
Stack #1: {
id: 1, StackElement: rule 0: root, sequence 3: ("Negative"), element id: 0, element in string: 0, parent id: -1, ref count: 1
}

[07:42:31] /project/cpp/grammar_matcher_base.cc:277: Trying to accept char: 32 " "
[07:42:31] /project/cpp/grammar_matcher_base.cc:301: Character 32 " " Rejected
[07:42:31] /project/cpp/grammar_matcher.cc:410: The token is rejected at position 0, character  
ERROR 04-17 07:42:31 [backend_xgrammar.py:148] Failed to advance FSM for request 0 for tokens 6785. Please file an issue.
--------------------------------------------------
Guided decoding by Choice:  It's the best language model I've ever encountered. I love it!
The sentiment expressed in the given statement is highly positive. The user uses words
--------------------------------------------------
```

## 参考资料

[xgrammar API](https://xgrammar.mlc.ai/docs/api/python/index.html)
