# 内存快照

```python
from datetime import datetime
import torch_npu
from torch_npu.contrib import transfer_to_npu


# torch.cuda.memory._record_memory_history(max_entries=100000)
torch_npu.npu.memory._record_memory_history(max_entries=100000)

timestamp = datetime.now().strftime('%Y_%m_%d_%H_%M_%S')
file_name = f"visual_mem_{timestamp}.pickle"

# torch.cuda.memory._dump_snapshot(file_name)
torch_npu.npu.memory._dump_snapshot(file_name)

# torch.cuda.memory._record_memory_history(enabled=None)
torch_npu.npu.memory._record_memory_history(enabled=None)
```
